"use strict";

var _mongoose = _interopRequireDefault(require("mongoose"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const GarageSchema = new _mongoose.default.Schema({
  garageNumber: {
    type: Number,
    default: 0,
    required: true
  },
  carsInLot: {
    type: Number,
    default: 0,
    required: true
  },
  capacity: {
    type: Number,
    required: true
  }
}, {
  timestamps: true
});
GarageSchema.pre('save', function (next) {
  if (this.isNew) {
    this.constructor.countDocuments({}).then(res => {
      this.garageNumber = res + 1; // Increment count

      next();
    });
  } else {
    io.emit("updated", this);
    next();
  }
});
module.exports.Garage = _mongoose.default.model('Garage', GarageSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NlcnZlci9jb21tb24vbW9kZWxzL0dhcmFnZS5qcyJdLCJuYW1lcyI6WyJHYXJhZ2VTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsImdhcmFnZU51bWJlciIsInR5cGUiLCJOdW1iZXIiLCJkZWZhdWx0IiwicmVxdWlyZWQiLCJjYXJzSW5Mb3QiLCJjYXBhY2l0eSIsInRpbWVzdGFtcHMiLCJwcmUiLCJuZXh0IiwiaXNOZXciLCJjb25zdHJ1Y3RvciIsImNvdW50RG9jdW1lbnRzIiwidGhlbiIsInJlcyIsImlvIiwiZW1pdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJHYXJhZ2UiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUVBLE1BQU1BLFlBQVksR0FBRyxJQUFJQyxrQkFBU0MsTUFBYixDQUFvQjtBQUNyQ0MsRUFBQUEsWUFBWSxFQUFFO0FBQ1ZDLElBQUFBLElBQUksRUFBRUMsTUFESTtBQUVWQyxJQUFBQSxPQUFPLEVBQUUsQ0FGQztBQUdWQyxJQUFBQSxRQUFRLEVBQUU7QUFIQSxHQUR1QjtBQU1yQ0MsRUFBQUEsU0FBUyxFQUFFO0FBQ1BKLElBQUFBLElBQUksRUFBRUMsTUFEQztBQUVQQyxJQUFBQSxPQUFPLEVBQUUsQ0FGRjtBQUdQQyxJQUFBQSxRQUFRLEVBQUU7QUFISCxHQU4wQjtBQVdyQ0UsRUFBQUEsUUFBUSxFQUFFO0FBQ05MLElBQUFBLElBQUksRUFBRUMsTUFEQTtBQUVORSxJQUFBQSxRQUFRLEVBQUU7QUFGSjtBQVgyQixDQUFwQixFQWVsQjtBQUFFRyxFQUFBQSxVQUFVLEVBQUU7QUFBZCxDQWZrQixDQUFyQjtBQWlCQVYsWUFBWSxDQUFDVyxHQUFiLENBQWlCLE1BQWpCLEVBQXlCLFVBQVNDLElBQVQsRUFBZTtBQUNwQyxNQUFJLEtBQUtDLEtBQVQsRUFBZ0I7QUFDWixTQUFLQyxXQUFMLENBQWlCQyxjQUFqQixDQUFnQyxFQUFoQyxFQUFvQ0MsSUFBcEMsQ0FBeUNDLEdBQUcsSUFBSTtBQUM1QyxXQUFLZCxZQUFMLEdBQW9CYyxHQUFHLEdBQUcsQ0FBMUIsQ0FENEMsQ0FDZjs7QUFDN0JMLE1BQUFBLElBQUk7QUFDUCxLQUhEO0FBSUgsR0FMRCxNQUtPO0FBQ0hNLElBQUFBLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRLFNBQVIsRUFBbUIsSUFBbkI7QUFDQVAsSUFBQUEsSUFBSTtBQUNQO0FBQ0osQ0FWRDtBQVlBUSxNQUFNLENBQUNDLE9BQVAsQ0FBZUMsTUFBZixHQUF3QnJCLGtCQUFTc0IsS0FBVCxDQUFlLFFBQWYsRUFBeUJ2QixZQUF6QixDQUF4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IEdhcmFnZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIGdhcmFnZU51bWJlcjoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBjYXJzSW5Mb3Q6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgY2FwYWNpdHk6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH1cbn0sIHsgdGltZXN0YW1wczogdHJ1ZSB9KTtcblxuR2FyYWdlU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uKG5leHQpIHtcbiAgICBpZiAodGhpcy5pc05ldykge1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yLmNvdW50RG9jdW1lbnRzKHt9KS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICB0aGlzLmdhcmFnZU51bWJlciA9IHJlcyArIDE7IC8vIEluY3JlbWVudCBjb3VudFxuICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpby5lbWl0KFwidXBkYXRlZFwiLCB0aGlzKTtcbiAgICAgICAgbmV4dCgpO1xuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cy5HYXJhZ2UgPSBtb25nb29zZS5tb2RlbCgnR2FyYWdlJywgR2FyYWdlU2NoZW1hKTsiXX0=