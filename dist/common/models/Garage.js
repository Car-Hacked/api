"use strict";

var _mongoose = _interopRequireDefault(require("mongoose"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const GarageSchema = new _mongoose.default.Schema({
  garageNumber: {
    type: Number,
    default: 0,
    required: true
  },
  carsInLot: {
    type: Number,
    default: 0,
    required: true
  },
  capacity: {
    type: Number,
    required: true
  }
}, {
  timestamps: true
});
GarageSchema.pre('save', function (next) {
  if (this.isNew) {
    this.constructor.countDocuments({}).then(res => {
      this.garageNumber = res + 1; // Increment count

      next();
    });
  } else {
    next();
  }
});
module.exports.Garage = _mongoose.default.model('Garage', GarageSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NlcnZlci9jb21tb24vbW9kZWxzL0dhcmFnZS5qcyJdLCJuYW1lcyI6WyJHYXJhZ2VTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsImdhcmFnZU51bWJlciIsInR5cGUiLCJOdW1iZXIiLCJkZWZhdWx0IiwicmVxdWlyZWQiLCJjYXJzSW5Mb3QiLCJjYXBhY2l0eSIsInRpbWVzdGFtcHMiLCJwcmUiLCJuZXh0IiwiaXNOZXciLCJjb25zdHJ1Y3RvciIsImNvdW50RG9jdW1lbnRzIiwidGhlbiIsInJlcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJHYXJhZ2UiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUVBLE1BQU1BLFlBQVksR0FBRyxJQUFJQyxrQkFBU0MsTUFBYixDQUFvQjtBQUNyQ0MsRUFBQUEsWUFBWSxFQUFFO0FBQ1ZDLElBQUFBLElBQUksRUFBRUMsTUFESTtBQUVWQyxJQUFBQSxPQUFPLEVBQUUsQ0FGQztBQUdWQyxJQUFBQSxRQUFRLEVBQUU7QUFIQSxHQUR1QjtBQU1yQ0MsRUFBQUEsU0FBUyxFQUFFO0FBQ1BKLElBQUFBLElBQUksRUFBRUMsTUFEQztBQUVQQyxJQUFBQSxPQUFPLEVBQUUsQ0FGRjtBQUdQQyxJQUFBQSxRQUFRLEVBQUU7QUFISCxHQU4wQjtBQVdyQ0UsRUFBQUEsUUFBUSxFQUFFO0FBQ05MLElBQUFBLElBQUksRUFBRUMsTUFEQTtBQUVORSxJQUFBQSxRQUFRLEVBQUU7QUFGSjtBQVgyQixDQUFwQixFQWVsQjtBQUFFRyxFQUFBQSxVQUFVLEVBQUU7QUFBZCxDQWZrQixDQUFyQjtBQWlCQVYsWUFBWSxDQUFDVyxHQUFiLENBQWlCLE1BQWpCLEVBQXlCLFVBQVNDLElBQVQsRUFBZTtBQUNwQyxNQUFJLEtBQUtDLEtBQVQsRUFBZ0I7QUFDWixTQUFLQyxXQUFMLENBQWlCQyxjQUFqQixDQUFnQyxFQUFoQyxFQUFvQ0MsSUFBcEMsQ0FBeUNDLEdBQUcsSUFBSTtBQUM1QyxXQUFLZCxZQUFMLEdBQW9CYyxHQUFHLEdBQUcsQ0FBMUIsQ0FENEMsQ0FDZjs7QUFDN0JMLE1BQUFBLElBQUk7QUFDUCxLQUhEO0FBSUgsR0FMRCxNQUtPO0FBQ0hBLElBQUFBLElBQUk7QUFDUDtBQUNKLENBVEQ7QUFXQU0sTUFBTSxDQUFDQyxPQUFQLENBQWVDLE1BQWYsR0FBd0JuQixrQkFBU29CLEtBQVQsQ0FBZSxRQUFmLEVBQXlCckIsWUFBekIsQ0FBeEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCBHYXJhZ2VTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBnYXJhZ2VOdW1iZXI6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgY2Fyc0luTG90OiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgZGVmYXVsdDogMCxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGNhcGFjaXR5OiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9XG59LCB7IHRpbWVzdGFtcHM6IHRydWUgfSk7XG5cbkdhcmFnZVNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7XG4gICAgaWYgKHRoaXMuaXNOZXcpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5jb3VudERvY3VtZW50cyh7fSkudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgdGhpcy5nYXJhZ2VOdW1iZXIgPSByZXMgKyAxOyAvLyBJbmNyZW1lbnQgY291bnRcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dCgpO1xuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cy5HYXJhZ2UgPSBtb25nb29zZS5tb2RlbCgnR2FyYWdlJywgR2FyYWdlU2NoZW1hKTsiXX0=