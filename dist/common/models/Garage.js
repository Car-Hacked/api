"use strict";

var _mongoose = _interopRequireDefault(require("mongoose"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const GarageSchema = new _mongoose.default.Schema({
  garageName: {
    type: String,
    required: true
  },
  address: {
    type: String,
    required: true
  },
  garageNumber: {
    type: Number,
    default: 0,
    required: true
  },
  carsInLot: {
    type: Number,
    default: 0,
    required: true
  },
  capacity: {
    type: Number,
    required: true
  }
}, {
  timestamps: true
});
GarageSchema.pre('save', function (next) {
  if (this.isNew) {
    this.constructor.countDocuments({}).then(res => {
      this.garageNumber = res + 1; // Increment count

      next();
    });
  } else {
    io.emit("updated", this._id, this.carsInLot);
    next();
  }
});
module.exports.Garage = _mongoose.default.model('Garage', GarageSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NlcnZlci9jb21tb24vbW9kZWxzL0dhcmFnZS5qcyJdLCJuYW1lcyI6WyJHYXJhZ2VTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsImdhcmFnZU5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJhZGRyZXNzIiwiZ2FyYWdlTnVtYmVyIiwiTnVtYmVyIiwiZGVmYXVsdCIsImNhcnNJbkxvdCIsImNhcGFjaXR5IiwidGltZXN0YW1wcyIsInByZSIsIm5leHQiLCJpc05ldyIsImNvbnN0cnVjdG9yIiwiY291bnREb2N1bWVudHMiLCJ0aGVuIiwicmVzIiwiaW8iLCJlbWl0IiwiX2lkIiwibW9kdWxlIiwiZXhwb3J0cyIsIkdhcmFnZSIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBRUEsTUFBTUEsWUFBWSxHQUFHLElBQUlDLGtCQUFTQyxNQUFiLENBQW9CO0FBQ3JDQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsSUFBSSxFQUFFQyxNQURFO0FBRVJDLElBQUFBLFFBQVEsRUFBRTtBQUZGLEdBRHlCO0FBS3JDQyxFQUFBQSxPQUFPLEVBQUU7QUFDTEgsSUFBQUEsSUFBSSxFQUFFQyxNQUREO0FBRUxDLElBQUFBLFFBQVEsRUFBRTtBQUZMLEdBTDRCO0FBU3JDRSxFQUFBQSxZQUFZLEVBQUU7QUFDVkosSUFBQUEsSUFBSSxFQUFFSyxNQURJO0FBRVZDLElBQUFBLE9BQU8sRUFBRSxDQUZDO0FBR1ZKLElBQUFBLFFBQVEsRUFBRTtBQUhBLEdBVHVCO0FBY3JDSyxFQUFBQSxTQUFTLEVBQUU7QUFDUFAsSUFBQUEsSUFBSSxFQUFFSyxNQURDO0FBRVBDLElBQUFBLE9BQU8sRUFBRSxDQUZGO0FBR1BKLElBQUFBLFFBQVEsRUFBRTtBQUhILEdBZDBCO0FBbUJyQ00sRUFBQUEsUUFBUSxFQUFFO0FBQ05SLElBQUFBLElBQUksRUFBRUssTUFEQTtBQUVOSCxJQUFBQSxRQUFRLEVBQUU7QUFGSjtBQW5CMkIsQ0FBcEIsRUF1QmxCO0FBQUVPLEVBQUFBLFVBQVUsRUFBRTtBQUFkLENBdkJrQixDQUFyQjtBQXlCQWIsWUFBWSxDQUFDYyxHQUFiLENBQWlCLE1BQWpCLEVBQXlCLFVBQVNDLElBQVQsRUFBZTtBQUNwQyxNQUFJLEtBQUtDLEtBQVQsRUFBZ0I7QUFDWixTQUFLQyxXQUFMLENBQWlCQyxjQUFqQixDQUFnQyxFQUFoQyxFQUFvQ0MsSUFBcEMsQ0FBeUNDLEdBQUcsSUFBSTtBQUM1QyxXQUFLWixZQUFMLEdBQW9CWSxHQUFHLEdBQUcsQ0FBMUIsQ0FENEMsQ0FDZjs7QUFDN0JMLE1BQUFBLElBQUk7QUFDUCxLQUhEO0FBSUgsR0FMRCxNQUtPO0FBQ0hNLElBQUFBLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRLFNBQVIsRUFBbUIsS0FBS0MsR0FBeEIsRUFBNkIsS0FBS1osU0FBbEM7QUFDQUksSUFBQUEsSUFBSTtBQUNQO0FBQ0osQ0FWRDtBQVlBUyxNQUFNLENBQUNDLE9BQVAsQ0FBZUMsTUFBZixHQUF3QnpCLGtCQUFTMEIsS0FBVCxDQUFlLFFBQWYsRUFBeUIzQixZQUF6QixDQUF4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IEdhcmFnZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIGdhcmFnZU5hbWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgYWRkcmVzczoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBnYXJhZ2VOdW1iZXI6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgY2Fyc0luTG90OiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgZGVmYXVsdDogMCxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGNhcGFjaXR5OiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9XG59LCB7IHRpbWVzdGFtcHM6IHRydWUgfSk7XG5cbkdhcmFnZVNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7XG4gICAgaWYgKHRoaXMuaXNOZXcpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5jb3VudERvY3VtZW50cyh7fSkudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgdGhpcy5nYXJhZ2VOdW1iZXIgPSByZXMgKyAxOyAvLyBJbmNyZW1lbnQgY291bnRcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaW8uZW1pdChcInVwZGF0ZWRcIiwgdGhpcy5faWQsIHRoaXMuY2Fyc0luTG90KTtcbiAgICAgICAgbmV4dCgpO1xuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cy5HYXJhZ2UgPSBtb25nb29zZS5tb2RlbCgnR2FyYWdlJywgR2FyYWdlU2NoZW1hKTsiXX0=